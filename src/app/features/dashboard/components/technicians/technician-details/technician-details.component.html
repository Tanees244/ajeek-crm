<div class="mt-6">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <button
      (click)="navigateBack()"
      class="flex items-center text-black font-bold text-h4"
    >
      <img src="assets/icons/leftArrow.svg" class="w-5 h-5 mr-4" alt="Back" />
      <span>Technician Details</span>
    </button>
  </div>

  <div class="bg-white rounded border border-white-edgar px-4 mb-6">
    <h1 class="text-2xl font-bold mt-8">Technician Profile</h1>
    <div class="border-b border-white-edgar my-8"></div>
    <div class="grid grid-cols-12 gap-6 mb-8">
      <!-- Left Column -->
      <div class="col-span-8">
        <div class="border border-white-edgar bg-white p-6 rounded h-full">
          <div class="grid grid-cols-12 h-full gap-4">
            <!-- Left Section -->
            <div
              class="col-span-5 border-white-edgar border-r flex flex-col justify-start gap-6 px-6 py-4"
            >
              <div>
                <label class="text-p font-bold block">Phone Number</label>
                <p class="font-secondary font-normal text-p text-neutral-gray">
                  {{ technician.phoneNumber }}
                </p>
              </div>
              <div>
                <label class="text-p font-bold block">Email Address</label>
                <p class="font-secondary font-normal text-p text-neutral-gray">
                  {{ technician.email }}
                </p>
              </div>
              <div>
                <label class="text-p font-bold block">Address</label>
                <p class="font-secondary font-normal text-p text-neutral-gray">
                  {{ technician.address }}
                </p>
              </div>
            </div>

            <!-- Middle Section -->
            <div class="col-span-3 flex flex-col justify-start gap-6 px-6 py-4">
              <div>
                <label class="text-p font-bold block">Iqama Number</label>
                <p class="font-secondary font-normal text-p text-neutral-gray">
                  {{ technician.iqamaNumber }}
                </p>
              </div>
              <div>
                <label class="text-p font-bold block">Expiry Date</label>
                <p class="font-secondary font-normal text-p text-neutral-gray">
                  {{ technician.expiryDate }}
                </p>
              </div>
              <div>
                <label class="text-p font-bold block">Date Of Birth</label>
                <p class="font-secondary font-normal text-p text-neutral-gray">
                  {{ technician.birthDate }}
                </p>
              </div>
            </div>

            <!-- Right Section -->
            <div
              class="col-span-4 border-l border-white-edgar px-6 py-4 flex flex-col justify-start gap-4"
            >
              <h2 class="text-p font-bold text-left">Expertise</h2>
              <div class="flex flex-wrap gap-2">
                <span
                  *ngFor="let expertise of technician.expertiseType"
                  class="font-secondary font-normal text-p text-neutral-gray py-1 bg-neutral-light rounded-md"
                >
                  {{ expertise }}
                </span>
              </div>
              <h2 class="text-p font-bold text-left">Skills</h2>
              <div class="flex flex-wrap gap-2">
                <span
                  *ngFor="let skill of technician.skills"
                  class="font-secondary font-normal text-p text-neutral-gray py-1 bg-neutral-light rounded-md"
                >
                  {{ skill }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Right Column -->
      <div class="col-span-4">
        <img src="/assets/icons/iqama.svg" />
      </div>
    </div>
  </div>

  <div class="grid grid-cols-12 gap-6 mb-8">
    <div class="col-span-4">
      <div class="border border-white-edgar bg-white p-6 rounded h-full">
        <!-- <div class="h-full gap-4">
          <div class="col-span-5 flex flex-col justify-start gap-6 px-6 py-4">
            <div>
              <label class="text-p font-bold block">Phone Number</label>
              <p class="font-secondary font-normal text-p text-neutral-gray">
                {{ technician.phoneNumber }}
              </p>
            </div>
            <div>
              <label class="text-p font-bold block">Email Address</label>
              <p class="font-secondary font-normal text-p text-neutral-gray">
                {{ technician.email }}
              </p>
            </div>
            <div>
              <label class="text-p font-bold block">Address</label>
              <p class="font-secondary font-normal text-p text-neutral-gray">
                {{ technician.address }}
              </p>
            </div>
          </div>
        </div> -->
        <div class="flex flex-row gap-4">
          <h6 class="font-semibold">Technician online status</h6>
          <select
            class="text-neutral-gray focus:outline-primary ml-6 border border-white-edgar rounded form-select"
          >
            <option value="">today</option>
            <option value="1-week">Last 1 Week</option>
            <option value="2-weeks">Last 2 Weeks</option>
            <option value="1-month">Last 1 Month</option>
          </select>
        </div>
        <div class="chart-container-1">
          <canvas #targetChart width="200" height="200"></canvas>
          <div class="tier-points">
            <span id="tierPointsValue" #tierPointsValue></span>
            <div class="totalTierPoints">{{ totalPoints }}</div>
          </div>
        </div>
      </div>
    </div>
    <!-- Right Column -->

    <div class="col-span-8 p-10 bg-white border border-white-edgar rounded">
      <h1 class="font-bold px-5 py-3">Tickets</h1>

      <div class="border-b border-white-edgar"></div>

      <!-- Add a scrollable container for the table -->
      <div class="table-container">
        <table class="table-auto border-collapse w-full">
          <thead class="bg-[#e5e5e5]">
            <tr>
              <th class="px-3 py-2 text-left">S.No</th>
              <th class="px-3 py-2 text-left">Ticket ID</th>
              <th class="px-3 py-2 text-left">Created At</th>
              <th class="px-3 py-2 text-left">Priority</th>
              <th class="px-3 py-2 text-left">Assigned At</th>
              <th class="px-3 py-2 text-left">Status</th>
              <th class="px-3 py-2 text-left"></th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let tickets of ticket; index as i"
              class="border-white-edgar items-center"
            >
              <td class="px-6 text-p">0{{ i + 1 }}</td>
              <td class="px-4 font-secondary text-h6 font-bold text-black">
                {{ tickets.ticketId }}
              </td>
              <td
                class="px-4 font-secondary text-h6 font-normal text-neutral-gray"
              >
                {{ tickets.createdAt }}
              </td>
              <td
                class="px-4 font-secondary text-h6 font-normal text-neutral-gray"
              >
                <div
                  [style.backgroundColor]="
                    getPriorityStyles(tickets.priority).bgColor
                  "
                  class="flex items-center justify-center rounded-full w-11 h-11"
                >
                  <img
                    [src]="getPriorityStyles(tickets.priority).icon"
                    alt="Priority Icon"
                  />
                </div>
              </td>
              <td
                class="px-4 font-secondary text-h6 font-normal text-neutral-gray"
              >
                {{ tickets.assignedAt }}
              </td>
              <td>
                <span
                  [ngClass]="{
                    'bg-[#fbd9d3] text-[#ee2400]': tickets.status === 'Pending',
                    'bg-[#DFF6DD] text-[#2E7D32]':
                      tickets.status === 'Completed',
                    'bg-[#FFDADA] text-[#D32F2F]':
                      tickets.status === 'Rejected',
                    'bg-[#FFF39A] text-[#b1a021]':
                      tickets.status === 'In Progress'
                  }"
                  class="text-md font-bold me-2 px-2.5 py-0.5 rounded-md"
                  >{{ tickets.status }}</span
                >
              </td>

              <td>
                <button class="px-2 py-1 text-primary font-bold underline">
                  Ticket details
                </button>
              </td>
            </tr>
            <tr
              *ngFor="let tickets of ticket; index as i"
              class="border-white-edgar items-center"
            >
              <td class="px-6 font-bold text-p">{{ i + 1 }}</td>
              <td class="px-4 font-secondary text-h6 font-bold text-black">
                {{ tickets.ticketId }}
              </td>
              <td
                class="px-4 font-secondary text-h6 font-normal text-neutral-gray"
              >
                {{ tickets.createdAt }}
              </td>
              <td
                class="px-4 font-secondary text-h6 font-normal text-neutral-gray"
              >
                <div
                  [style.backgroundColor]="
                    getPriorityStyles(tickets.priority).bgColor
                  "
                  class="flex items-center justify-center rounded-full w-11 h-11"
                >
                  <img
                    [src]="getPriorityStyles(tickets.priority).icon"
                    alt="Priority Icon"
                  />
                </div>
              </td>
              <td
                class="px-4 font-secondary text-h6 font-normal text-neutral-gray"
              >
                {{ tickets.assignedAt }}
              </td>
              <td>
                <span
                  [ngClass]="{
                    'bg-[#fbd9d3] text-[#ee2400]': tickets.status === 'Pending',
                    'bg-[#DFF6DD] text-[#2E7D32]':
                      tickets.status === 'Completed',
                    'bg-[#FFDADA] text-[#D32F2F]':
                      tickets.status === 'Rejected',
                    'bg-[#FFF39A] text-[#b1a021]':
                      tickets.status === 'In Progress'
                  }"
                  class="text-md font-bold me-2 px-2.5 py-0.5 rounded-md"
                  >{{ tickets.status }}</span
                >
              </td>

              <td>
                <button class="px-2 py-1 text-primary font-bold underline">
                  Ticket details
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-12 gap-6 mb-8">
    <!-- Left Column -->
    <div class="col-span-4">
      <div class="border border-white-edgar bg-white p-6 rounded h-full">
        <div class="h-full gap-4">
          <!-- Left Section -->
          <div class="col-span-5 flex flex-col justify-start gap-6 px-6 py-4">
            <div>
              <label class="text-p font-bold block">Phone Number</label>
              <p class="font-secondary font-normal text-p text-neutral-gray">
                {{ technician.phoneNumber }}
              </p>
            </div>
            <div>
              <label class="text-p font-bold block">Email Address</label>
              <p class="font-secondary font-normal text-p text-neutral-gray">
                {{ technician.email }}
              </p>
            </div>
            <div>
              <label class="text-p font-bold block">Address</label>
              <p class="font-secondary font-normal text-p text-neutral-gray">
                {{ technician.address }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Right Column -->
    <div class="col-span-4 bg-white border border-white-edgar rounded">
      <!--<img class="w-full" src="/assets/icons/iqama.svg" />-->
      <!-- Doughnut Chart -->
      <div class="bg-white rounded-lg shadow p-4">
        <div class="flex flex-row gap-4">
          <h6 class="font-semibold">Monthly Tickets Status</h6>
          <select
            class="text-neutral-gray focus:outline-primary ml-6 border border-white-edgar rounded form-select"
          >
            <option value="">This Month</option>
            <option value="1-week">Last 1 Week</option>
            <option value="2-weeks">Last 2 Weeks</option>
            <option value="1-month">Last 1 Month</option>
          </select>
        </div>
        <canvas
          baseChart
          [datasets]="doughnutChartData.datasets"
          [labels]="doughnutChartData.labels"
          [options]="doughnutChartOptions"
          [plugins]="doughnutChartPlugins"
          [type]="'doughnut'"
        >
        </canvas>
        <div class="grid grid-cols-3 gap-2 mt-4 text-center text-sm">
          <div>
            <div class="font-bold">7321</div>
            <div class="text-gray-600">In Progress</div>
          </div>
          <div>
            <div class="font-bold">5023</div>
            <div class="text-gray-600">Pending</div>
          </div>
          <div>
            <div class="font-bold">3393</div>
            <div class="text-gray-600">Completed</div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-span-4 bg-white border border-white-edgar rounded">
      <!--<img class="w-full" src="/assets/icons/iqama.svg" />-->
      <h6 class="font-semibold px-2 py-2">Technician Productivity</h6>
      <div class="border-b border-white-edgar"></div>

      <div
        class="m-5 py-1 px-2 flex justify-between items-center gap-5 border-2 rounded"
      >
        <div
          class="py-3 px-3 w-19 h-19 shadow-md rounded overflow-hidden"
          style="background-color: #33658a"
        >
          <img
            src="assets/icons/tickets.svg"
            alt="Partner Avatar"
            class="w-14 h-13 object-cover"
          />
        </div>
        <div class="w-full shadow-md bg-neutral-200 m-2 text-end">
          <h2 class="py-2 px-2 text-h6 font-bold text-black">
            Minimum tickets
          </h2>
          <p class="text-h6 font-normal font-secondary text-neutral-gray">
            <span class="text-h5 px-2 text-primary font-medium">06</span>
          </p>
        </div>
      </div>

      <div
        class="m-5 py-1 px-2 flex justify-between items-center gap-5 border-2 rounded"
      >
        <div
          class="py-3 px-3 w-19 h-19 shadow-md rounded overflow-hidden"
          style="background-color: #33658a"
        >
          <img
            src="assets/icons/tickets.svg"
            alt="Partner Avatar"
            class="w-14 h-13 object-cover"
          />
        </div>
        <div class="w-full shadow-md bg-neutral-200 m-2 text-end">
          <h2 class="py-2 px-2 text-h6 font-bold text-black">
            ticket completed
          </h2>
          <p class="text-h6 font-normal font-secondary text-neutral-gray">
            <span class="text-h5 px-2 text-primary font-medium">09</span>
          </p>
        </div>
      </div>

      <div
        class="m-5 py-1 px-2 flex justify-between items-center gap-5 border-2 rounded"
      >
        <div
          class="py-3 px-3 w-19 h-19 shadow-md rounded overflow-hidden"
          style="background-color: #33658a"
        >
          <img
            src="assets/icons/tickets.svg"
            alt="Partner Avatar"
            class="w-14 h-13 object-cover"
          />
        </div>
        <div class="w-full shadow-md bg-neutral-200 m-2 text-end">
          <h2 class="py-2 px-2 text-h6 font-bold text-black">Weekly Average</h2>
          <p class="text-h6 font-normal font-secondary text-neutral-gray">
            <span class="text-h5 px-2 text-primary font-medium">7.2</span>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col-span-4">
  <div class="border border-white-edgar bg-white p-6 rounded h-full">
    <h2 class="text-h4 m-2 font-semibold px-2 py-2">
      Spare Parts Notifications
    </h2>
    <div class="border-b border-white-edgar"></div>

    <ol class="relative border-s-2 border-cyan-200 mt-2 p-10">
      <li class="mb-10 ms-4">
        <div
          class="absolute w-3 h-3 bg-cyan-200 rounded-full mt-1.5 -start-1.5"
        ></div>
        <div class="flex flex-row gap-4">
          <time
            class="mb-1 text-lg font-normal leading-none text-gray-400 dark:text-gray-500"
          >
            jan 2025 <br />
            <span class="text-sm font-normal">35m ago</span>
          </time>
          <div
            class="w-full bg-[#e5e5e5] p-4 border border-gray-200 rounded-lg shadow-sm"
          >
            <div class="sm:flex items-center justify-between py-4">
              <span
                style="background-color: #fbd9d3; color: red"
                class="mb-1 text-md font-bold sm:order-last sm:mb-0 me-2 px-2.5 py-0.5 rounded-md"
                >Pending Approval</span
              >
              <div
                class="text-md font-normal text-gray-500 lex dark:text-gray-300"
              >
                Ticket No: <span class="text-black font-bold">10931235</span> |
                Request Generated Date:
                <span class="text-black font-bold">2025-01-01</span> | Visit
                Type:
                <span class="text-black font-bold">Pre-Visit Request</span>
              </div>
            </div>
            <div class="border-b"></div>
            <div class="mt-2">
              <h1 class="text-h5 font-bold">Spare Parts:</h1>
              <div class="grid grid-cols-12 gap-6 mb-8 mt-3">
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Compressor
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >UAC CO 4691C AC Compressor</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Capicitor
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >Condenser (Capicitor) for Ac</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Fan Blade
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >FSA1 BLA-12 46123C Haier</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </li>
      <li class="mb-10 ms-4">
        <div
          class="absolute w-3 h-3 bg-cyan-200 rounded-full mt-1.5 -start-1.5"
        ></div>
        <div class="flex flex-row gap-4">
          <time
            class="mb-1 text-lg font-normal leading-none text-gray-400 dark:text-gray-500"
          >
            jan 2025 <br />
            <span class="text-sm font-normal">35m ago</span>
          </time>
          <div
            class="w-full bg-[#e5e5e5] p-4 border border-gray-200 rounded-lg shadow-sm"
          >
            <div class="sm:flex items-center justify-between py-4">
              <span
                style="background-color: #dff6dd; color: #0ebc01"
                class="mb-1 text-md font-bold sm:order-last sm:mb-0 me-2 px-2.5 py-0.5 rounded-md"
                >Completed</span
              >
              <div
                class="text-md font-normal text-gray-500 lex dark:text-gray-300"
              >
                Ticket No: <span class="text-black font-bold">10931235</span> |
                Request Generated Date:
                <span class="text-black font-bold">2025-01-01</span> | Visit
                Type:
                <span class="text-black font-bold">Pre-Visit Request</span>
              </div>
            </div>
            <div class="border-b"></div>
            <div class="mt-2">
              <h1 class="text-h5 font-bold">Spare Parts:</h1>
              <div class="grid grid-cols-12 gap-6 mb-8 mt-3">
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Compressor
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >UAC CO 4691C AC Compressor</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Capicitor
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >Condenser (Capicitor) for Ac</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Fan Blade
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >FSA1 BLA-12 46123C Haier</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </li>
      <li class="mb-10 ms-4">
        <div
          class="absolute w-3 h-3 bg-cyan-200 rounded-full mt-1.5 -start-1.5"
        ></div>
        <div class="flex flex-row gap-4">
          <time
            class="mb-1 text-lg font-normal leading-none text-gray-400 dark:text-gray-500"
          >
            jan 2025
            <div class="text-sm font-normal">35m ago</div>
          </time>
          <div
            class="w-full bg-[#e5e5e5] p-4 border border-gray-200 rounded-lg shadow-sm"
          >
            <div class="sm:flex items-center justify-between py-4">
              <span
                style="background-color: #fbd9d3; color: red"
                class="mb-1 text-md font-bold sm:order-last sm:mb-0 me-2 px-2.5 py-0.5 rounded-md"
                >Pending Approval</span
              >
              <div
                class="text-md font-normal text-gray-500 lex dark:text-gray-300"
              >
                Ticket No: <span class="text-black font-bold">10931235</span> |
                Request Generated Date:
                <span class="text-black font-bold">2025-01-01</span> | Visit
                Type:
                <span class="text-black font-bold">Pre-Visit Request</span>
              </div>
            </div>
            <div class="border-b"></div>
            <div class="mt-2">
              <h1 class="text-h5 font-bold">Spare Parts:</h1>
              <div class="grid grid-cols-12 gap-6 mb-8 mt-3">
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Compressor
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >UAC CO 4691C AC Compressor</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Capicitor
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >Condenser (Capicitor) for Ac</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
                <div class="col-span-4">
                  <div class="w-full bg-white flex flex-row justify-between">
                    <h2 class="px-2 text-h6 font-bold text-black py-3">
                      Fan Blade
                      <p class="font-normal font-secondary text-neutral-gray">
                        <span class="" style="font-size: 12px"
                          >FSA1 BLA-12 46123C Haier</span
                        >
                      </p>
                    </h2>
                    <p
                      class="text-h6 font-normal font-secondary text-neutral-gray py-3"
                    >
                      <span class="text-h6 px-2 text-primary font-medium"
                        >Qty. 02</span
                      >
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </li>
    </ol>
  </div>
</div>
