<div class="py-6">
  <div class="flex items-center justify-between mb-8 bg-white border border-white-edgar rounded p-6 gap-x-8">
    <div class="flex-1 relative" *ngFor="let step of steps; let i = index">
      <!-- Step Box -->
      <div class="border-2 rounded-lg p-4 shadow-md transition-all duration-300"
           [ngClass]="currentStep >= step.number ? 'bg-primary-10 border-primary' : 'bg-white border-white-edgar'">
        <div [ngClass]="currentStep === step.number ? 'text-primary text-[10px]' : 'text-neutral-gray text-[10px]'">
          Step {{step.number}}
        </div>
        <div [ngClass]="currentStep >= step.number ? 'text-black font-bold' : 'text-neutral-gray font-bold'">
          {{step.title}}
        </div>
      </div>


      <!-- Connecting Line -->
      <!--<div *ngIf="i < steps.length - 1"
           class="absolute w-full h-0.5 bg-gray-200 right-0 top-1/2 -translate-y-1/2">
      </div>-->
    </div>
  </div>

  <!-- Step content containers -->
  <div [ngSwitch]="currentStep">
    <!-- Step 1: Customer Details -->
    <div *ngSwitchCase="1" class="bg-white rounded border border-white-edgar p-6 shadow-sm mb-6">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-h4 font-bold">Register your Ticket</h2>
          <p class="text-p text-neutral-gray font-secondary font-normal">Step-by-Step ticket Submission Form</p>
        </div>
        <app-button label="Add New Customer"
                    type="button"
                    buttonType="primary"
                    iconUrl="assets/icons/plus.svg"
                    customClass="py-4 px-8"
                    (click)="openAddNewCustomerModal()">
        </app-button>
      </div>

      <div class="flex flex-col bg-[#F6F6F6] p-4 rounded">
        <div class="flex items-center justify-between w-full">
          <div>
            <h3 class="font-bold text-p mb-1">Search Customer</h3>
            <p class="text-neutral-gray text-p">Search for a customer by their number to view all their details.</p>
          </div>
          <div class="flex items-center space-x-2">
            <div class="relative w-full justify-between">
              <img src="assets/icons/searchIcon.svg" alt="Search Icon" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5">
              <input type="text" placeholder="Search customer by number"
                     class="w-full pr-24 pl-12 py-2 border rounded focus:outline-none focus:border-primary transition-all duration-200">
            </div>
            <app-button label="Enter"
                        type="button"
                        buttonType="primary"
                        customClass="py-2 px-6 ">
            </app-button>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 2: Product Selection -->
    <div *ngSwitchCase="2" class="bg-white rounded-lg p-6 shadow-sm mb-6">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-lg font-semibold">Select Product/Appliance</h2>
          <p class="text-sm text-gray-500">Choose the appliance(s) you are submitting the ticket for</p>
        </div>
        <button class="bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-600 transition-all duration-200">Add New Product</button>
      </div>

      <div class="flex gap-4 mb-6">
        <select class="border rounded-lg px-4 py-2 w-48">
          <option>Select Category</option>
        </select>
        <select class="border rounded-lg px-4 py-2 w-48">
          <option>Select Brand</option>
        </select>
        <div class="flex-1 flex gap-2">
          <input type="text" placeholder="Search for Serial No."
                 class="border rounded-lg px-4 py-2 flex-1">
          <button class="bg-cyan-500 text-white px-6 py-2 rounded-lg hover:bg-cyan-600 transition-all duration-200">Search</button>
        </div>
        <div class="flex items-center gap-2 text-sm text-gray-600">
          <span>Row Per Page:</span>
          <select class="border rounded px-2 py-1">
            <option>10</option>
          </select>
          <span>Entries</span>
        </div>
      </div>

      <table class="w-full">
        <thead>
          <tr class="border-b">
            <th class="text-left py-3 px-4">Product ID</th>
            <th class="text-left py-3 px-4">Product Name</th>
            <th class="text-left py-3 px-4">Product Type</th>
            <th class="text-left py-3 px-4">Brand</th>
            <th class="text-left py-3 px-4">Warranty</th>
            <th class="text-left py-3 px-4">Serial Number</th>
            <th class="text-left py-3 px-4">Model Number</th>
            <th class="text-left py-3 px-4">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products" class="border-b">
            <td class="py-3 px-4">{{product.id}}</td>
            <td class="py-3 px-4">{{product.name}}</td>
            <td class="py-3 px-4">{{product.type}}</td>
            <td class="py-3 px-4">{{product.brand}}</td>
            <td class="py-3 px-4">{{product.warranty}}</td>
            <td class="py-3 px-4">{{product.serialNumber}}</td>
            <td class="py-3 px-4">{{product.modelNumber}}</td>
            <td class="py-3 px-4">
              <button class="text-cyan-500 hover:text-cyan-700 transition-all duration-200">Select Product</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Step 3: Time Slot Selection -->
    <div *ngSwitchCase="3" class="bg-white rounded-lg p-6 shadow-sm mb-6">
      <h2 class="text-lg font-semibold mb-2">Select Your Availability</h2>
      <p class="text-sm text-gray-500 mb-6">
        Specify your preferred time slots for each product service. This will allow us to schedule a technician visit that works best for you. You can choose a time slot for each product individually.
      </p>

      <!-- Date Selection -->
      <div class="mb-6">
        <h4 class="font-medium mb-4">Select Date/Day</h4>
        <div class="grid grid-cols-5 gap-4">
          <div *ngFor="let day of days"
               [class]="'text-center p-4 rounded-lg ' + (day.isSelected ? 'bg-cyan-50' : 'bg-gray-50')">
            <div class="font-medium">{{day.name}}</div>
            <div class="text-sm text-gray-500">{{day.date}}</div>
          </div>
        </div>
      </div>

      <!-- Time Slots -->
      <div>
        <h4 class="font-medium mb-4">Select Slot</h4>
        <div class="grid grid-cols-4 gap-4 mb-4">
          <div *ngFor="let period of timePeriods" class="text-center font-medium">
            {{period}}
          </div>
        </div>
        <div class="grid grid-cols-4 gap-4">
          <div *ngFor="let slot of timeSlots">
            <div *ngFor="let time of slot.times"
                 [class]="'border rounded p-2 mb-2 text-center ' + time.colorClass">
              {{time.range}}
            </div>
          </div>
        </div>
      </div>

      <!-- Legend -->
      <div class="mt-6 flex items-center gap-6">
        <div *ngFor="let status of statusLegend" class="flex items-center gap-2">
          <div [class]="'w-3 h-3 rounded-sm ' + status.colorClass"></div>
          <span>{{status.label}}</span>
        </div>
      </div>
    </div>

    <!-- Step 4: Confirmation -->
    <div *ngSwitchCase="4" class="bg-white rounded-lg p-6 shadow-sm">
      <h2 class="text-lg font-semibold mb-4">Final Confirmation</h2>
      <div class="mb-6">
        <div class="flex items-center gap-4">
          <span class="font-semibold">Product/Appliance:</span>
          <span class="text-gray-500">Name</span>
        </div>
        <div class="flex items-center gap-4">
          <span class="font-semibold">Time Slot:</span>
          <span class="text-gray-500">Slot</span>
        </div>
      </div>

      <button class="bg-cyan-500 text-white px-8 py-3 rounded-lg hover:bg-cyan-600 transition-all duration-200">Confirm</button>
    </div>
  </div>

  <!-- Navigation -->
  <div class="flex justify-between mt-8">
    <button *ngIf="currentStep > 1" class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400 transition-all duration-200"
            (click)="previousStep()">
      Previous
    </button>
    <button *ngIf="currentStep < steps.length" class="bg-cyan-500 text-white px-6 py-3 rounded-lg hover:bg-cyan-600 transition-all duration-200"
            (click)="nextStep()">
      Next
    </button>
  </div>
</div>



<app-add-user-modal #addUserModal (customerAdded)="handleCustomerAdded($event)"></app-add-user-modal>
